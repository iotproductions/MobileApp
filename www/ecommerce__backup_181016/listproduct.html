<ons-page modifier="Ecommerce" ng-controller="listproductctrl">
    <ons-toolbar modifier="Ecommerce">
                <div class="left">
                    <ons-toolbar-button ng-click="Back()">
                        <ons-icon icon="ion-ios-arrow-back"></ons-icon>
                    </ons-toolbar-button>
                </div>
                <div class="center" ng-bind="LanguageEcom.PRODUCT_LIST">
                </div>
                 <div class="right" ng-click="ShowCart()">
            <div class="shopping-cart-icon" style="right:5% !important"><span ng-if="Cart.NumberCartItem>0" class="notification" ng-bind="Cart.NumberCartItem"></span></div>
        </div>
    </ons-toolbar>
     <ons-splitter var="FilterProductPanel">
        <ons-splitter-side side="right" width="80%" collapse>
            <ons-page style="box-shadow: 0 0 20px;
border-left: 1px solid rgba(1,1,1,.3) " modifier="notop">
                <div class="wrap-filter-product">
                    <div class="header padding-10 border-bottom-1">Lọc sản phẩm</div>
                    <div class="filter-by border-bottom-1 white-background">
                        <div class="border-bottom-1 padding-10">
                            <span>Danh mục :</span>
                            <span class="selected-cate">
                                <span ng-if="ListSelectedCategory.length == 0">Tất cả danh mục</span>
                                <span ng-if="ListSelectedCategory.length > 0" ng-bind-template="{{ListSelectedCategory.length}} danh mục được chọn"></span>
                            </span>
                        </div>
                        <div class="content padding-10">
                            <span ng-class="{'active': item.IsSelected == 1 }" class="transition-03s" ng-repeat="item in ListCategory" ng-bind="item.CatName" ng-click="SelectCate(item)"></span>
                        </div>
                    </div>

                    <div class="filter-by border-bottom-1 border-top-1 white-background">
                        <div class="padding-10" style="float:left">
                            <span ng-bind="LanguageEcom.PRICE">Giá</span>
                        </div>
                        <div class="content" style="float: left;max-width: 80%;">
                            <div class="col-2">
                                <input class="input-ecommerce style-input-filter" type="number" style="border-radius:0" ng-model="DataFilter.MinPrice"  placeholder="Thấp" />
                            </div>
                             <div class="col-2">
                                <input class="input-ecommerce style-input-filter" type="number" style="border-radius:0"  ng-model="DataFilter.MaxPrice"  placeholder="Cao" />
                            </div>
                        </div>
                    </div>

                     <div class="border-bottom-1 border-top-1 white-background">
                        <div class="padding-10" style="float:left">
                            <span ng-bind="LanguageEcom.PRODUCT_NUM_SHOW">Sản phẩm hiển thị</span>
                        </div>
                        <div class="content" style="float:right;max-width:30%">
                            <input class="input-ecommerce style-input-filter" style="border-radius:0" type="number"   ng-model="DataFilter.Pagelimit" />
                        </div>
                    </div>
                </div>
                <ons-bottom-toolbar modifier="transparent"  class="auto-height" style="background: white;border-top: 1px solid rgba(1, 1, 1, .1);">
                     <div class="col-2">
                        <ons-button ng-click="Cancel()" style="background: none;color: gray ;" modifier="large ecommerce-delete" ng-bind="LanguageEcom.CANCEL"></ons-button>
                    </div>
                    <div class="col-2">
                        <ons-button ng-click="Filter()" style="background: none;
color: orangered ;" modifier="large ecommerce-main" ng-bind="LanguageEcom.FILTER"></ons-button>
                    </div>
                    
                </ons-bottom-toolbar>
            </ons-page>
        </ons-splitter-side>
        <ons-splitter-content page="listproduct.html"></ons-splitter-content>
    </ons-splitter>

    <template id="listproduct.html">
        <ons-page elem-ready="500" modifier="Ecommerce notop">
            <div class="box-shadow-2 white-background filter-panel">
                <div class="left-filter">
                    <span ng-click="ShowSortPanel($event)">
                        <span ng-bind="Tilte"></span>
                        <ons-icon icon="ion-android-arrow-dropdown"></ons-icon>
                    </span>
                </div>
                <div ng-click="OpenFilterPanel()" class="right-filter">
                    <div ng-bind="LanguageEcom.FILTER"></div>
                    <div  class="filter-icon"></div>
                </div>
            </div>
            <div  ontouchend="loadmoredata('listproduct.html',this)"  ng-if="Products.length > 0 && Products !=null" style="float:left">
                <div class="ecommerce-product-item" ng-repeat="item in Products"> <!-- product item-->
            <div class="thumbnail thumbnail-item">
                <img ng-src="{{ipImageEcommerce}}{{item.LinkAvatar}}" onerror="this.src='ecommerce/img/icon-no-image.png'" />
                 <span class="discount-icon" ng-if="item.ProDiscount > 0">
                    <span ng-bind-template="{{item.ProDiscount}}%"></span>
                    <span style="line-height:0;font-size:.7em">OFF</span>
                </span>
                <div class="additemtocart" ng-click="QuickBuy(item)">
                    +    
                </div>
                <div ng-click="ShowDetailproduct(item)" class="touchpro">

                </div>
            </div>
            <div class="product-name" ng-bind="item.ProName"></div>
            <div>
                 <span class="product-price">
                    <span ng-bind="ConvertObject.ConvertNumberFormat(item.PriceDetail)"></span>đ
                </span>
                <span class="product-old-price" ng-if="item.ProDiscount > 0 && item.PriceWithoutTax != null">
                    <span ng-bind="ConvertObject.ConvertNumberFormat(item.PriceWithoutTax)"></span>đ
                </span>
            </div>
            <div>
                <span class="product-favorite-count">
                     <div class="like-2"></div>
                     <div ng-bind="item.ProPrefer"></div>
                </span>
                <span class="product-rate">
                    <span ng-bind-html="ConvertObject.ConvertShowStarRating(item.Rate)"></span>
                </span>
            </div>
        </div>

            </div>
            <div ng-if="Products  == null || Products.length == 0" notfound text="{{LanguageEcom.NO_PRODUCT_FOUND}}"  icon="ion-alert"></div>
            <ons-popover  direction="down" var="SortProductPopover" cancelable>
                <ons-list>
                    <ons-list-item ng-click="SortBy(5)" tappable>
                        <div  ng-bind="LanguageEcom.NEWEST" ></div>
                    </ons-list-item>
                    <ons-list-item ng-click="SortBy(4)" tappable>
                        <div ng-bind="LanguageEcom.BESTSELLING"></div>
                    </ons-list-item>
                    <ons-list-item ng-click="SortBy(3)" tappable >
                        <div ng-bind="LanguageEcom.SALE"></div>
                    </ons-list-item>
                    <ons-list-item ng-click="SortBy(2)" tappable >
                        <div ng-bind="LanguageEcom.CHEAP"></div>
                    </ons-list-item>
                    <ons-list-item ng-click="SortBy(1)" tappable >
                        <div ng-bind="LanguageEcom.EXPENSIVE"></div>
                    </ons-list-item>
                </ons-list>
            </ons-popover>
            <div loader></div> 
            <div class="spinner-loadmore">
                <img id="loadmorepro" class="fa-spin" src="ecommerce/img/spinner-circle.svg" style="width:40px;display:none" />
            </div>
        </ons-page>
    </template>
</ons-page>